<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to sweep • sweep</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to sweep">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-76139189-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-76139189-1');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sweep</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.1.9999</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../reference/index.html">Function Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/SW00_Introduction_to_sweep.html">Introduction to sweep</a>
    </li>
    <li>
      <a href="../articles/SW01_Forecasting_Time_Series_Groups.html">Forecasting time series groups</a>
    </li>
    <li>
      <a href="../articles/SW02_Forecasting_Multiple_Models.html">Forecasting multiple models</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/business-science/sweep">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introduction to sweep</h1>
                        <h4 class="author">Matt Dancho</h4>
            
            <h4 class="date">2019-09-20</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/business-science/sweep/blob/master/vignettes/SW00_Introduction_to_sweep.Rmd"><code>vignettes/SW00_Introduction_to_sweep.Rmd</code></a></small>
      <div class="hidden name"><code>SW00_Introduction_to_sweep.Rmd</code></div>

    </div>

    
    
<blockquote>
<p>Extending <code>broom</code> to time series forecasting</p>
</blockquote>
<p>The <code>sweep</code> package extends the <code>broom</code> tools (tidy, glance, and augment) for performing forecasts and time series analysis in the “tidyverse”. The package is geared towards the workflow required to perform forecasts using Rob Hyndman’s <code>forecast</code> package, and contains the following elements:</p>
<ol style="list-style-type: decimal">
<li><p><strong>model tidiers</strong>: <code>sw_tidy</code>, <code>sw_glance</code>, <code>sw_augment</code>, <code>sw_tidy_decomp</code> functions extend <code>tidy</code>, <code>glance</code>, and <code>augment</code> from the <code>broom</code> package specifically for models (<code><a href="https://rdrr.io/pkg/forecast/man/ets.html">ets()</a></code>, <code><a href="https://rdrr.io/pkg/forecast/man/Arima.html">Arima()</a></code>, <code><a href="https://rdrr.io/pkg/forecast/man/bats.html">bats()</a></code>, etc) used for forecasting.</p></li>
<li><p><strong>forecast tidier</strong>: <code>sw_sweep</code> converts a <code>forecast</code> object to a tibble that can be easily manipulated in the “tidyverse”.</p></li>
</ol>
<p>To illustrate, let’s take a basic forecasting workflow starting from data collected in a tibble format and then performing a forecast to achieve the end result in tibble format.</p>
<div id="prerequisites" class="section level1">
<h1 class="hasAnchor">
<a href="#prerequisites" class="anchor"></a>Prerequisites</h1>
<p>Before we get started, load the following packages.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tidyverse)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tidyquant)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(timetk)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(sweep)</a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(forecast)</a></code></pre></div>
</div>
<div id="forecasting-sales-of-beer-wine-and-distilled-alcohol-beverages" class="section level1">
<h1 class="hasAnchor">
<a href="#forecasting-sales-of-beer-wine-and-distilled-alcohol-beverages" class="anchor"></a>Forecasting Sales of Beer, Wine, and Distilled Alcohol Beverages</h1>
<p>We’ll use the <code>tidyquant</code> package to get the US alcohol sales, which comes from the FRED data base (the origin is the US Bureau of the Census, one of the 80+ data sources FRED connects to). The FRED code is “S4248SM144NCEN” and the data set can be found <a href="https://fred.stlouisfed.org/series/S4248SM144NCEN">here</a>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">alcohol_sales_tbl &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/tidyquant/man/tq_get.html">tq_get</a></span>(<span class="st">"S4248SM144NCEN"</span>, </a>
<a class="sourceLine" id="cb2-2" data-line-number="2">                            <span class="dt">get  =</span> <span class="st">"economic.data"</span>, </a>
<a class="sourceLine" id="cb2-3" data-line-number="3">                            <span class="dt">from =</span> <span class="st">"2007-01-01"</span>,</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">                            <span class="dt">to   =</span> <span class="st">"2016-12-31"</span>)</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">alcohol_sales_tbl</a></code></pre></div>
<pre><code>## # A tibble: 120 x 2
##    date       price
##    &lt;date&gt;     &lt;int&gt;
##  1 2007-01-01  6627
##  2 2007-02-01  6743
##  3 2007-03-01  8195
##  4 2007-04-01  7828
##  5 2007-05-01  9570
##  6 2007-06-01  9484
##  7 2007-07-01  8608
##  8 2007-08-01  9543
##  9 2007-09-01  8123
## 10 2007-10-01  9649
## # … with 110 more rows</code></pre>
<p>We can quickly visualize using the <code>ggplot2</code> package. We can see that there appears to be some seasonality and an upward trend.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">alcohol_sales_tbl <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> price)) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_line</span>(<span class="dt">size =</span> <span class="dv">1</span>, <span class="dt">color =</span> <span class="kw"><a href="https://rdrr.io/pkg/tidyquant/man/palette_tq.html">palette_light</a></span>()[[<span class="dv">1</span>]]) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="st">    </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">"loess"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"US Alcohol Sales: Monthly"</span>, <span class="dt">x =</span> <span class="st">""</span>, <span class="dt">y =</span> <span class="st">"Millions"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="st">    </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> scales<span class="op">::</span>dollar) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="st">    </span><span class="kw">scale_x_date</span>(<span class="dt">date_breaks =</span> <span class="st">"1 year"</span>, <span class="dt">date_labels =</span> <span class="st">"%Y"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="st">    </span><span class="kw"><a href="https://rdrr.io/pkg/tidyquant/man/theme_tq.html">theme_tq</a></span>()</a></code></pre></div>
<p><img src="SW00_Introduction_to_sweep_files/figure-html/unnamed-chunk-4-1.png" width="95%" style="display: block; margin: auto;"></p>
</div>
<div id="forecasting-workflow" class="section level1">
<h1 class="hasAnchor">
<a href="#forecasting-workflow" class="anchor"></a>Forecasting Workflow</h1>
<p>The forecasting workflow involves a few basic steps:</p>
<ol style="list-style-type: decimal">
<li>Step 1: Coerce to a <code>ts</code> object class.</li>
<li>Step 2: Apply a model (or set of models)</li>
<li>Step 3: Forecast the models (similar to predict)</li>
<li>Step 4: Use <code><a href="../reference/sw_sweep.html">sw_sweep()</a></code> to tidy the forecast.</li>
</ol>
<p><em>Note that we purposely omit other steps such as testing the series for stationarity (<code><a href="https://rdrr.io/r/stats/box.test.html">Box.test(type = "Ljung")</a></code>) and analysis of autocorrelations (<code>Acf</code>, <code>Pacf</code>) for brevity purposes. We recommend the analyst to follow the forecasting workflow in <a href="https://www.otexts.org/book/fpp">“Forecasting: principles and practice”</a></em></p>
<div id="step-1-coerce-to-a-ts-object-class" class="section level2">
<h2 class="hasAnchor">
<a href="#step-1-coerce-to-a-ts-object-class" class="anchor"></a>Step 1: Coerce to a <code>ts</code> object class</h2>
<p>The <code>forecast</code> package uses the <code>ts</code> data structure, which is quite a bit different than tibbles that we are currently using. Fortunately, it’s easy to get to the correct structure with <code><a href="https://rdrr.io/pkg/timetk/man/tk_ts.html">tk_ts()</a></code> from the <code>timetk</code> package. The <code>start</code> and <code>freq</code> variables are required for the regularized time series (<code>ts</code>) class, and these specify how to treat the time series. For monthly, the frequency should be specified as 12. This results in a nice calendar view. The <code>silent = TRUE</code> tells the <code><a href="https://rdrr.io/pkg/timetk/man/tk_ts.html">tk_ts()</a></code> function to skip the warning notifying us that the “date” column is being dropped. Non-numeric columns must be dropped for <code>ts</code> class, which is matrix based and a homogeneous data class.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">alcohol_sales_ts &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/timetk/man/tk_ts.html">tk_ts</a></span>(alcohol_sales_tbl, <span class="dt">start =</span> <span class="dv">2007</span>, <span class="dt">freq =</span> <span class="dv">12</span>, <span class="dt">silent =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">alcohol_sales_ts</a></code></pre></div>
<pre><code>##        Jan   Feb   Mar   Apr   May   Jun   Jul   Aug   Sep   Oct   Nov
## 2007  6627  6743  8195  7828  9570  9484  8608  9543  8123  9649  9390
## 2008  7093  7483  8365  8895  9794  9977  9553  9375  9225  9948  8758
## 2009  7266  7578  8688  9162  9369 10167  9507  8923  9272  9075  8949
## 2010  6558  7481  9475  9424  9351 10552  9077  9273  9420  9413  9866
## 2011  6901  8014  9832  9281  9967 11344  9106 10469 10085  9612 10328
## 2012  7486  8641  9709  9423 11342 11274  9845 11163  9532 10754 10953
## 2013  8395  8888 10110 10493 12218 11385 11186 11462 10494 11540 11138
## 2014  8557  9059 10055 10977 11792 11904 10965 10981 10828 11817 10470
## 2015  8400  9062 10722 11107 11508 12904 11869 11224 12022 11983 11506
## 2016  8648 10321 12107 11420 12238 13681 10950 12700 12272 11905 13016
##        Dec
## 2007 10065
## 2008 10839
## 2009 10843
## 2010 11455
## 2011 11483
## 2012 11922
## 2013 12709
## 2014 13310
## 2015 14183
## 2016 14421</code></pre>
<p>A significant benefit is that the resulting <code>ts</code> object maintains a “timetk index”, which will help with forecasting dates later. We can verify this using <code><a href="https://rdrr.io/pkg/timetk/man/tk_index.html">has_timetk_idx()</a></code> from the <code>timetk</code> package.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/timetk/man/tk_index.html">has_timetk_idx</a></span>(alcohol_sales_ts)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Now that a time series has been coerced, let’s proceed with modeling.</p>
</div>
<div id="step-2-modeling-a-time-series" class="section level2">
<h2 class="hasAnchor">
<a href="#step-2-modeling-a-time-series" class="anchor"></a>Step 2: Modeling a time series</h2>
<p>The modeling workflow takes a time series object and applies a model. Nothing new here: we’ll simply use the <code><a href="https://rdrr.io/pkg/forecast/man/ets.html">ets()</a></code> function from the <code>forecast</code> package to get an Exponential Smoothing ETS (Error, Trend, Seasonal) model.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">fit_ets &lt;-<span class="st"> </span>alcohol_sales_ts <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="st">    </span><span class="kw"><a href="https://rdrr.io/pkg/forecast/man/ets.html">ets</a></span>()</a></code></pre></div>
<p>Where <code>sweep</code> can help is in the evaluation of a model. Expanding on the <code>broom</code> package there are four functions:</p>
<ul>
<li>
<code><a href="../reference/sw_tidy.html">sw_tidy()</a></code>: Returns a tibble of model parameters</li>
<li>
<code><a href="../reference/sw_glance.html">sw_glance()</a></code>: Returns the model accuracy measurements</li>
<li>
<code><a href="../reference/sw_augment.html">sw_augment()</a></code>: Returns the fitted and residuals of the model</li>
<li>
<code><a href="../reference/sw_tidy_decomp.html">sw_tidy_decomp()</a></code>: Returns a tidy decomposition from a model</li>
</ul>
<p>The guide below shows which model object compatibility with <code>sweep</code> tidier functions.</p>
<table class="table">
<caption>Function Compatibility</caption>
<thead><tr class="header">
<th align="left">Object</th>
<th align="center">sw_tidy()</th>
<th align="center">sw_glance()</th>
<th align="center">sw_augment()</th>
<th align="center">sw_tidy_decomp()</th>
<th align="center">sw_sweep()</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">ar</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">arima</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">Arima</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">ets</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">baggedETS</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">bats</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">tbats</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">nnetar</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">stl</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">X</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">HoltWinters</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">StructTS</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">tslm</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">decompose</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">X</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">adf.test</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">Box.test</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">kpss.test</td>
<td align="center">X</td>
<td align="center">X</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">forecast</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">X</td>
</tr>
</tbody>
</table>
<p>Going through the tidiers, we can get useful <code>model</code> information.</p>
<div id="sw_tidy" class="section level3">
<h3 class="hasAnchor">
<a href="#sw_tidy" class="anchor"></a>sw_tidy</h3>
<p><code><a href="../reference/sw_tidy.html">sw_tidy()</a></code> returns the model parameters.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="../reference/sw_tidy.html">sw_tidy</a></span>(fit_ets)</a></code></pre></div>
<pre><code>## # A tibble: 17 x 2
##    term     estimate
##    &lt;chr&gt;       &lt;dbl&gt;
##  1 alpha    0.109   
##  2 beta     0.0643  
##  3 gamma    0.000105
##  4 phi      0.961   
##  5 l     8387.      
##  6 b       39.3     
##  7 s0       1.18    
##  8 s1       1.02    
##  9 s2       1.04    
## 10 s3       0.988   
## 11 s4       1.04    
## 12 s5       0.997   
## 13 s6       1.12    
## 14 s7       1.07    
## 15 s8       0.972   
## 16 s9       0.975   
## 17 s10      0.829</code></pre>
</div>
<div id="sw_glance" class="section level3">
<h3 class="hasAnchor">
<a href="#sw_glance" class="anchor"></a>sw_glance</h3>
<p><code><a href="../reference/sw_glance.html">sw_glance()</a></code> returns the model quality parameters.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw"><a href="../reference/sw_glance.html">sw_glance</a></span>(fit_ets)</a></code></pre></div>
<pre><code>## # A tibble: 1 x 12
##   model.desc  sigma logLik   AIC   BIC    ME  RMSE   MAE    MPE  MAPE  MASE
##   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 ETS(M,Ad,… 0.0454 -1012. 2059. 2110.  14.6  430.  359. 0.0126  3.55 0.694
## # … with 1 more variable: ACF1 &lt;dbl&gt;</code></pre>
</div>
<div id="sw_augment" class="section level3">
<h3 class="hasAnchor">
<a href="#sw_augment" class="anchor"></a>sw_augment</h3>
<p><code><a href="../reference/sw_augment.html">sw_augment()</a></code> returns the actual, fitted and residual values.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">augment_fit_ets &lt;-<span class="st"> </span><span class="kw"><a href="../reference/sw_augment.html">sw_augment</a></span>(fit_ets)</a>
<a class="sourceLine" id="cb14-2" data-line-number="2">augment_fit_ets</a></code></pre></div>
<pre><code>## # A tibble: 120 x 4
##    index     .actual .fitted   .resid
##    &lt;yearmon&gt;   &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;
##  1 Jan 2007     6627   6473.  0.0237 
##  2 Feb 2007     6743   7043. -0.0426 
##  3 Mar 2007     8195   8269. -0.00900
##  4 Apr 2007     7828   8251. -0.0512 
##  5 May 2007     9570   9021.  0.0609 
##  6 Jun 2007     9484   9504. -0.00214
##  7 Jul 2007     8608   8509.  0.0116 
##  8 Aug 2007     9543   8941.  0.0673 
##  9 Sep 2007     8123   8586. -0.0539 
## 10 Oct 2007     9649   9011.  0.0708 
## # … with 110 more rows</code></pre>
<p>We can review the residuals to determine if their are any underlying patterns left. Note that the index is class <code>yearmon</code>, which is a regularized date format.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">augment_fit_ets <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> index, <span class="dt">y =</span> .resid)) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>, <span class="dt">color =</span> <span class="st">"grey40"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="st">    </span><span class="kw">geom_point</span>(<span class="dt">color =</span> <span class="kw"><a href="https://rdrr.io/pkg/tidyquant/man/palette_tq.html">palette_light</a></span>()[[<span class="dv">1</span>]], <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="st">    </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">"loess"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="st">    </span><span class="kw">scale_x_yearmon</span>(<span class="dt">n =</span> <span class="dv">10</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-7" data-line-number="7"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"US Alcohol Sales: ETS Residuals"</span>, <span class="dt">x =</span> <span class="st">""</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="st">    </span><span class="kw"><a href="https://rdrr.io/pkg/tidyquant/man/theme_tq.html">theme_tq</a></span>()</a></code></pre></div>
<p><img src="SW00_Introduction_to_sweep_files/figure-html/unnamed-chunk-12-1.png" width="95%" style="display: block; margin: auto;"></p>
</div>
<div id="sw_tidy_decomp" class="section level3">
<h3 class="hasAnchor">
<a href="#sw_tidy_decomp" class="anchor"></a>sw_tidy_decomp</h3>
<p><code><a href="../reference/sw_tidy_decomp.html">sw_tidy_decomp()</a></code> returns the decomposition of the ETS model.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">decomp_fit_ets &lt;-<span class="st"> </span><span class="kw"><a href="../reference/sw_tidy_decomp.html">sw_tidy_decomp</a></span>(fit_ets)</a>
<a class="sourceLine" id="cb17-2" data-line-number="2">decomp_fit_ets </a></code></pre></div>
<pre><code>## # A tibble: 121 x 5
##    index     observed level slope season
##    &lt;yearmon&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1 Dec 2006        NA 8387. 39.3   1.18 
##  2 Jan 2007      6627 8447. 50.6   0.768
##  3 Feb 2007      6743 8456. 25.3   0.829
##  4 Mar 2007      8195 8472. 19.5   0.975
##  5 Apr 2007      7828 8443. -9.28  0.972
##  6 May 2007      9570 8490. 24.1   1.07 
##  7 Jun 2007      9484 8511. 22.0   1.12 
##  8 Jul 2007      8608 8543. 27.6   0.997
##  9 Aug 2007      9543 8633. 63.6   1.04 
## 10 Sep 2007      8123 8643. 31.0   0.988
## # … with 111 more rows</code></pre>
<p>We can review the decomposition using <code>ggplot2</code> as well. The data will need to be manipulated slightly for the facet visualization. The <code>gather()</code> function from the <code>tidyr</code> package is used to reshape the data into a long format data frame with column names “key” and “value” indicating all columns except for index are to be reshaped. The “key” column is then mutated using <code>mutate()</code> to a factor which preserves the order of the keys so “observed” comes first when plotting.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">decomp_fit_ets <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="st">    </span><span class="kw">gather</span>(<span class="dt">key =</span> key, <span class="dt">value =</span> value, <span class="op">-</span>index) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-3" data-line-number="3"><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">key =</span> forcats<span class="op">::</span><span class="kw"><a href="https://forcats.tidyverse.org/reference/as_factor.html">as_factor</a></span>(key)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-4" data-line-number="4"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> index, <span class="dt">y =</span> value, <span class="dt">group =</span> key)) <span class="op">+</span></a>
<a class="sourceLine" id="cb19-5" data-line-number="5"><span class="st">    </span><span class="kw">geom_line</span>(<span class="dt">color =</span> <span class="kw"><a href="https://rdrr.io/pkg/tidyquant/man/palette_tq.html">palette_light</a></span>()[[<span class="dv">2</span>]]) <span class="op">+</span></a>
<a class="sourceLine" id="cb19-6" data-line-number="6"><span class="st">    </span><span class="kw"><a href="https://rdrr.io/pkg/tidyquant/man/geom_ma.html">geom_ma</a></span>(<span class="dt">ma_fun =</span> SMA, <span class="dt">n =</span> <span class="dv">12</span>, <span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb19-7" data-line-number="7"><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>key, <span class="dt">scales =</span> <span class="st">"free_y"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb19-8" data-line-number="8"><span class="st">    </span><span class="kw">scale_x_yearmon</span>(<span class="dt">n =</span> <span class="dv">10</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb19-9" data-line-number="9"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"US Alcohol Sales: ETS Decomposition"</span>, <span class="dt">x =</span> <span class="st">""</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-10" data-line-number="10"><span class="st">    </span><span class="kw"><a href="https://rdrr.io/pkg/tidyquant/man/theme_tq.html">theme_tq</a></span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb19-11" data-line-number="11"><span class="st">    </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>))</a></code></pre></div>
<pre><code>## Warning: Removed 1 rows containing missing values (geom_path).</code></pre>
<p><img src="SW00_Introduction_to_sweep_files/figure-html/unnamed-chunk-14-1.png" width="95%" style="display: block; margin: auto;"></p>
<p>Under normal circumstances it would make sense to refine the model at this point. However, in the interest of showing capabilities (rather than how to forecast) we move onto forecasting the model. For more information on how to forecast, please refer to the online book <a href="https://www.otexts.org/book/fpp"><em>“Forecasting: principles and practices”</em></a>.</p>
</div>
</div>
<div id="step-3-forecasting-the-model" class="section level2">
<h2 class="hasAnchor">
<a href="#step-3-forecasting-the-model" class="anchor"></a>Step 3: Forecasting the model</h2>
<p>Next we forecast the ETS model using the <code><a href="https://rdrr.io/pkg/forecast/man/forecast.html">forecast()</a></code> function. The returned <code>forecast</code> object isn’t in a “tidy” format (i.e. data frame). This is where the <code><a href="../reference/sw_sweep.html">sw_sweep()</a></code> function helps.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">fcast_ets &lt;-<span class="st"> </span>fit_ets <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="st">    </span><span class="kw"><a href="https://rdrr.io/pkg/forecast/man/forecast.html">forecast</a></span>(<span class="dt">h =</span> <span class="dv">12</span>) </a></code></pre></div>
</div>
<div id="step-4-tidy-the-forecast-object" class="section level2">
<h2 class="hasAnchor">
<a href="#step-4-tidy-the-forecast-object" class="anchor"></a>Step 4: Tidy the forecast object</h2>
<p>We’ll use the <code><a href="../reference/sw_sweep.html">sw_sweep()</a></code> function to coerce a <code>forecast</code> into a “tidy” data frame. The <code><a href="../reference/sw_sweep.html">sw_sweep()</a></code> function then coerces the <code>forecast</code> object into a tibble that can be sent to <code>ggplot</code> for visualization. Let’s inspect the result.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="kw"><a href="../reference/sw_sweep.html">sw_sweep</a></span>(fcast_ets, <span class="dt">fitted =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>## # A tibble: 252 x 7
##    index     key    price lo.80 lo.95 hi.80 hi.95
##    &lt;yearmon&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 Jan 2007  actual  6627    NA    NA    NA    NA
##  2 Feb 2007  actual  6743    NA    NA    NA    NA
##  3 Mar 2007  actual  8195    NA    NA    NA    NA
##  4 Apr 2007  actual  7828    NA    NA    NA    NA
##  5 May 2007  actual  9570    NA    NA    NA    NA
##  6 Jun 2007  actual  9484    NA    NA    NA    NA
##  7 Jul 2007  actual  8608    NA    NA    NA    NA
##  8 Aug 2007  actual  9543    NA    NA    NA    NA
##  9 Sep 2007  actual  8123    NA    NA    NA    NA
## 10 Oct 2007  actual  9649    NA    NA    NA    NA
## # … with 242 more rows</code></pre>
<p>The tibble returned contains “index”, “key” and “value” (or in this case “price”) columns in a long or “tidy” format that is ideal for visualization with <code>ggplot2</code>. The “index” is in a regularized format (in this case <code>yearmon</code>) because the <code>forecast</code> package uses <code>ts</code> objects. We’ll see how we can get back to the original irregularized format (in this case <code>date</code>) later. The “key” and “price” columns contains three groups of key-value pairs:</p>
<ol style="list-style-type: decimal">
<li>
<strong>actual</strong>: the actual values from the original data</li>
<li>
<strong>fitted</strong>: the model values returned from the <code><a href="https://rdrr.io/pkg/forecast/man/ets.html">ets()</a></code> function (excluded by default)</li>
<li>
<strong>forecast</strong>: the predicted values from the <code><a href="https://rdrr.io/pkg/forecast/man/forecast.html">forecast()</a></code> function</li>
</ol>
<p>The <code><a href="../reference/sw_sweep.html">sw_sweep()</a></code> function contains an argument <code>fitted = FALSE</code> by default meaning that the model “fitted” values are not returned. We can toggle this on if desired. The remaining columns are the forecast confidence intervals (typically 80 and 95, but this can be changed with <code><a href="https://rdrr.io/pkg/forecast/man/forecast.html">forecast(level = c(80, 95))</a></code>). These columns are setup in a wide format to enable using the <code>geom_ribbon()</code>.</p>
<p>Let’s visualize the forecast with <code>ggplot2</code>. We’ll use a combination of <code>geom_line()</code> and <code>geom_ribbon()</code>. The fitted values are toggled off by default to reduce the complexity of the plot, but these can be added if desired. Note that because we are using a regular time index of the <code>yearmon</code> class, we need to add <code>scale_x_yearmon()</code>.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="kw"><a href="../reference/sw_sweep.html">sw_sweep</a></span>(fcast_ets) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> index, <span class="dt">y =</span> price, <span class="dt">color =</span> key)) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_ribbon</span>(<span class="kw">aes</span>(<span class="dt">ymin =</span> lo<span class="fl">.95</span>, <span class="dt">ymax =</span> hi<span class="fl">.95</span>), </a>
<a class="sourceLine" id="cb24-4" data-line-number="4">                <span class="dt">fill =</span> <span class="st">"#D5DBFF"</span>, <span class="dt">color =</span> <span class="ot">NA</span>, <span class="dt">size =</span> <span class="dv">0</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-5" data-line-number="5"><span class="st">    </span><span class="kw">geom_ribbon</span>(<span class="kw">aes</span>(<span class="dt">ymin =</span> lo<span class="fl">.80</span>, <span class="dt">ymax =</span> hi<span class="fl">.80</span>, <span class="dt">fill =</span> key), </a>
<a class="sourceLine" id="cb24-6" data-line-number="6">                <span class="dt">fill =</span> <span class="st">"#596DD5"</span>, <span class="dt">color =</span> <span class="ot">NA</span>, <span class="dt">size =</span> <span class="dv">0</span>, <span class="dt">alpha =</span> <span class="fl">0.8</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-7" data-line-number="7"><span class="st">    </span><span class="kw">geom_line</span>(<span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-8" data-line-number="8"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"US Alcohol Sales, ETS Model Forecast"</span>, <span class="dt">x =</span> <span class="st">""</span>, <span class="dt">y =</span> <span class="st">"Millions"</span>,</a>
<a class="sourceLine" id="cb24-9" data-line-number="9">         <span class="dt">subtitle =</span> <span class="st">"Regular Time Index"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-10" data-line-number="10"><span class="st">    </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> scales<span class="op">::</span>dollar) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-11" data-line-number="11"><span class="st">    </span><span class="kw">scale_x_yearmon</span>(<span class="dt">n =</span> <span class="dv">12</span>, <span class="dt">format =</span> <span class="st">"%Y"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-12" data-line-number="12"><span class="st">    </span><span class="kw"><a href="https://rdrr.io/pkg/tidyquant/man/scale_manual.html">scale_color_tq</a></span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb24-13" data-line-number="13"><span class="st">    </span><span class="kw"><a href="https://rdrr.io/pkg/tidyquant/man/scale_manual.html">scale_fill_tq</a></span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb24-14" data-line-number="14"><span class="st">    </span><span class="kw"><a href="https://rdrr.io/pkg/tidyquant/man/theme_tq.html">theme_tq</a></span>() </a></code></pre></div>
<p><img src="SW00_Introduction_to_sweep_files/figure-html/unnamed-chunk-17-1.png" width="95%" style="display: block; margin: auto;"></p>
<p>Because the <code>ts</code> object was created with the <code><a href="https://rdrr.io/pkg/timetk/man/tk_ts.html">tk_ts()</a></code> function, it contained a timetk index that was carried with it throughout the forecasting workflow. As a result, we can use the <code>timetk_idx</code> argument, which maps the original irregular index (dates) and a generated future index to the regularized time series (yearmon). This results in the ability to return an index of date and datetime, which is not currently possible with the <code>forecast</code> objects. Notice that the index is returned as <code>date</code> class.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw"><a href="../reference/sw_sweep.html">sw_sweep</a></span>(fcast_ets, <span class="dt">timetk_idx =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-2" data-line-number="2"><span class="st">    </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>()</a></code></pre></div>
<pre><code>## # A tibble: 6 x 7
##   index      key    price lo.80 lo.95 hi.80 hi.95
##   &lt;date&gt;     &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 2007-01-01 actual  6627    NA    NA    NA    NA
## 2 2007-02-01 actual  6743    NA    NA    NA    NA
## 3 2007-03-01 actual  8195    NA    NA    NA    NA
## 4 2007-04-01 actual  7828    NA    NA    NA    NA
## 5 2007-05-01 actual  9570    NA    NA    NA    NA
## 6 2007-06-01 actual  9484    NA    NA    NA    NA</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="kw"><a href="../reference/sw_sweep.html">sw_sweep</a></span>(fcast_ets, <span class="dt">timetk_idx =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2"><span class="st">    </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">tail</a></span>()</a></code></pre></div>
<pre><code>## # A tibble: 6 x 7
##   index      key       price  lo.80  lo.95  hi.80  hi.95
##   &lt;date&gt;     &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 2017-07-01 forecast 12168. 11255. 10771. 13082. 13565.
## 2 2017-08-01 forecast 12747. 11719. 11175. 13775. 14319.
## 3 2017-09-01 forecast 12081. 11031. 10476. 13130. 13685.
## 4 2017-10-01 forecast 12726. 11535. 10904. 13917. 14548.
## 5 2017-11-01 forecast 12559. 11293. 10623. 13826. 14496.
## 6 2017-12-01 forecast 14461. 12893. 12062. 16029. 16860.</code></pre>
<p>We can build the same plot with dates in the x-axis now.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="kw"><a href="../reference/sw_sweep.html">sw_sweep</a></span>(fcast_ets, <span class="dt">timetk_idx =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb29-2" data-line-number="2"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> index, <span class="dt">y =</span> price, <span class="dt">color =</span> key)) <span class="op">+</span></a>
<a class="sourceLine" id="cb29-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_ribbon</span>(<span class="kw">aes</span>(<span class="dt">ymin =</span> lo<span class="fl">.95</span>, <span class="dt">ymax =</span> hi<span class="fl">.95</span>), </a>
<a class="sourceLine" id="cb29-4" data-line-number="4">                <span class="dt">fill =</span> <span class="st">"#D5DBFF"</span>, <span class="dt">color =</span> <span class="ot">NA</span>, <span class="dt">size =</span> <span class="dv">0</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb29-5" data-line-number="5"><span class="st">    </span><span class="kw">geom_ribbon</span>(<span class="kw">aes</span>(<span class="dt">ymin =</span> lo<span class="fl">.80</span>, <span class="dt">ymax =</span> hi<span class="fl">.80</span>, <span class="dt">fill =</span> key), </a>
<a class="sourceLine" id="cb29-6" data-line-number="6">                <span class="dt">fill =</span> <span class="st">"#596DD5"</span>, <span class="dt">color =</span> <span class="ot">NA</span>, <span class="dt">size =</span> <span class="dv">0</span>, <span class="dt">alpha =</span> <span class="fl">0.8</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb29-7" data-line-number="7"><span class="st">    </span><span class="kw">geom_line</span>(<span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb29-8" data-line-number="8"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"US Alcohol Sales, ETS Model Forecast"</span>, <span class="dt">x =</span> <span class="st">""</span>, <span class="dt">y =</span> <span class="st">"Millions"</span>, </a>
<a class="sourceLine" id="cb29-9" data-line-number="9">         <span class="dt">subtitle =</span> <span class="st">"Irregular Time Index"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb29-10" data-line-number="10"><span class="st">    </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> scales<span class="op">::</span>dollar) <span class="op">+</span></a>
<a class="sourceLine" id="cb29-11" data-line-number="11"><span class="st">    </span><span class="kw">scale_x_date</span>(<span class="dt">date_breaks =</span> <span class="st">"1 year"</span>, <span class="dt">date_labels =</span> <span class="st">"%Y"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb29-12" data-line-number="12"><span class="st">    </span><span class="kw"><a href="https://rdrr.io/pkg/tidyquant/man/scale_manual.html">scale_color_tq</a></span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb29-13" data-line-number="13"><span class="st">    </span><span class="kw"><a href="https://rdrr.io/pkg/tidyquant/man/scale_manual.html">scale_fill_tq</a></span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb29-14" data-line-number="14"><span class="st">    </span><span class="kw"><a href="https://rdrr.io/pkg/tidyquant/man/theme_tq.html">theme_tq</a></span>() </a></code></pre></div>
<p><img src="SW00_Introduction_to_sweep_files/figure-html/unnamed-chunk-20-1.png" width="95%" style="display: block; margin: auto;"></p>
<p>In this example, there is not much benefit to returning an irregular time series. However, when working with frequencies below monthly, the ability to return irregular index values becomes more apparent.</p>
</div>
</div>
<div id="recap" class="section level1">
<h1 class="hasAnchor">
<a href="#recap" class="anchor"></a>Recap</h1>
<p>This was an overview of how various functions within the <code>sweep</code> package can be used to assist in forecast analysis. In the next vignette, we discuss some more powerful concepts including forecasting at scale with grouped time series analysis.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#prerequisites">Prerequisites</a></li>
      <li><a href="#forecasting-sales-of-beer-wine-and-distilled-alcohol-beverages">Forecasting Sales of Beer, Wine, and Distilled Alcohol Beverages</a></li>
      <li>
<a href="#forecasting-workflow">Forecasting Workflow</a><ul class="nav nav-pills nav-stacked">
<li><a href="#step-1-coerce-to-a-ts-object-class">Step 1: Coerce to a <code>ts</code> object class</a></li>
      <li><a href="#step-2-modeling-a-time-series">Step 2: Modeling a time series</a></li>
      <li><a href="#step-3-forecasting-the-model">Step 3: Forecasting the model</a></li>
      <li><a href="#step-4-tidy-the-forecast-object">Step 4: Tidy the forecast object</a></li>
      </ul>
</li>
      <li><a href="#recap">Recap</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Matt Dancho, Davis Vaughan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
